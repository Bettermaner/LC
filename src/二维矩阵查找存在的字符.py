
# ðŸ§  è§£é¢˜æ€è·¯ï¼šDFS + å›žæº¯
# æˆ‘ä»¬å¯ä»¥ä»Žæ¯ä¸ªæ ¼å­å‡ºå‘ï¼Œå°è¯•è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ï¼Œå¯»æ‰¾ç›®æ ‡å•è¯ã€‚

# æ­¥éª¤è¯´æ˜Žï¼š
# éåŽ†æ•´ä¸ªç½‘æ ¼ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼›
# å¦‚æžœå½“å‰å­—ç¬¦å’Œç›®æ ‡å•è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç›¸åŒï¼Œå°±ä»Žè¿™é‡Œå¼€å§‹ DFSï¼›
# åœ¨ DFS ä¸­ï¼š
# å¦‚æžœå½“å‰ä½ç½®å­—ç¬¦ä¸åŒ¹é… â†’ è¿”å›ž False
# å¦åˆ™æ ‡è®°è¯¥ä½ç½®ä¸ºå·²è®¿é—®ï¼ˆæ¯”å¦‚æŠŠå­—ç¬¦æ”¹ä¸º # æˆ–è€…ç”¨ visited æ•°ç»„ï¼‰
# æœå››ä¸ªæ–¹å‘ç»§ç»­æœç´¢ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰
# æ‰¾åˆ°å®Œæ•´å•è¯è·¯å¾„åŽè¿”å›ž True
# æœç´¢å®ŒæˆåŽè¦æ¢å¤çŽ°åœºï¼ˆå›žæº¯ï¼‰


# â±ï¸ æ—¶é—´ä¸Žç©ºé—´å¤æ‚åº¦åˆ†æž
# æ—¶é—´å¤æ‚åº¦: æœ€åæƒ…å†µä¸‹æ¯ä¸ªæ ¼å­éƒ½è¦åšä¸€æ¬¡ DFSï¼Œæ¯æ¬¡æœ€å¤šèµ° len(word) æ­¥ã€‚
# æ€»æ—¶é—´å¤æ‚åº¦å¤§çº¦æ˜¯ O(m Ã— n Ã— 4^L)ï¼Œå…¶ä¸­ L æ˜¯ word çš„é•¿åº¦ã€‚
# ç©ºé—´å¤æ‚åº¦: ä¸»è¦æ˜¯é€’å½’æ ˆçš„ç©ºé—´ï¼Œæœ€æ·±ä¸º Lï¼Œæ‰€ä»¥æ˜¯ O(L)

def find_string_in_matrix(matrix,string):
    "äºŒç»´çŸ©é˜µä¸­æŸ¥æ‰¾å­˜åœ¨çš„å­—ç¬¦ä¸²"

    # è§£é¢˜æ€è·¯: dfs + é€’å½’
    # çŸ©é˜µ shape : [m,n]
    if not matrix:
        return False

    m = len(matrix)
    n = len(matrix[0]) 

    # å¯¹æ¯ä¸ªå­—ç¬¦ä¾æ¬¡é€’å½’,æ¯ä¸ªå­—ç¬¦éƒ½å¯ä»¥ä¸Šä¸‹å·¦å³ç§»åŠ¨
    # å¯ä»¥æŠŠå­—ç¬¦ä¸Šä¸‹å·¦å³çš„å­—ç¬¦çœ‹åšæ˜¯ä¸€ä¸ª4å‰æ ‘,æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯¹åº”4ä¸ªå­èŠ‚ç‚¹
    for i in range(m):

        for j in range(n):

            if dfs(matrix,string,i ,j,0):
                return True
    else:
        return False

def dfs(matrix,string,i,j,index):

    if (i > len(matrix)-1 or j > len(matrix[0])-1 or i < 0 or j < 0 or matrix[i][j] != string[index] ):
        return False

    # å¦‚æžœå­—ç¬¦é•¿åº¦å·²ç»è¾¾åˆ°,è¯´æ˜Žå·²ç»å®Œå…¨åŒ¹é…ä¸Š
    if index == len(string) -1:
        return True
    
    tmp = matrix[i][j]
    ## ä¿®æ”¹å½“å‰åæ ‡çš„å€¼,é˜²æ­¢æŒ‡é’ˆèµ°å›žæ¥
    matrix[i][j] = "*"
    ## èµ°é€’å½’ï¼Œæ²¿ç€å½“å‰åæ ‡çš„ä¸Šä¸‹å·¦å³4ä¸ªæ–¹å‘æŸ¥æ‰¾
    res = dfs(matrix,string,i+1,j,index+1) or dfs(matrix,string,i-1,j,index+1) or dfs(matrix,string,i,j+1,index+1) or dfs(matrix,string,i,j-1,index+1)
    
    ## é€’å½’ä¹‹åŽå†æŠŠå½“å‰çš„åæ ‡å¤åŽŸ
    matrix[i][j] = tmp
    
    return res


print(find_string_in_matrix([["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]],"ABCCED"))